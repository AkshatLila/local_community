{% extends "base.html" %}

{% block title %}Manage Residents - Secretary Panel{% endblock %}
{% block header_title %}Manage Residents{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h3 class="card-title">All Residents</h3>
    </div>
    <div class="card-body">
        {% if users %}
            <div style="display: grid; gap: 1rem;">
                {% for user in users %}
                    <div style="padding: 1.5rem; border: 1px solid var(--border-gray); border-radius: var(--border-radius); background-color: #fafbfc;">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                            <div style="flex: 1;">
                                <h4 style="margin: 0 0 0.5rem 0; color: var(--dark-slate); font-size: 1.25rem;">{{ user.name }}</h4>
                                <div style="display: flex; gap: 1rem; color: var(--light-gray); font-size: 0.875rem; margin-bottom: 1rem;">
                                    <span><strong>Email:</strong> {{ user.email }}</span>
                                    <span><strong>Apartment:</strong> {{ user.apartment }}</span>
                                    <span><strong>Role:</strong> Resident</span>
                                </div>
                                <div style="color: var(--light-gray); font-size: 0.875rem;">
                                    <span>Joined on {{ user.created_at.strftime('%B %d, %Y') if user.created_at else 'Recently' }}</span>
                                </div>
                            </div>
                            <div style="display: flex; flex-direction: column; gap: 0.5rem; align-items: flex-end;">
                                <span class="badge badge-success">Active Resident</span>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div style="text-align: center; padding: 3rem; color: var(--light-gray);">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" style="margin-bottom: 1rem; opacity: 0.5;">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
                <h4 style="margin: 0 0 0.5rem 0; color: var(--light-gray);">No Residents Registered</h4>
                <p style="margin: 0; color: var(--light-gray);">Residents will appear here once they register and join the community.</p>
            </div>
        {% endif %}
    </div>
</div>

<!-- Community Statistics -->
<div class="card" style="margin-top: 2rem;">
    <div class="card-header">
        <h3 class="card-title">Community Statistics</h3>
    </div>
    <div class="card-body">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem;">
            <div style="text-align: center; padding: 1.5rem; border: 1px solid var(--border-gray); border-radius: var(--border-radius); background-color: #fafbfc;">
                <h3 style="margin: 0; color: var(--primary-blue); font-size: 2rem;">{{ users|length }}</h3>
                <p style="margin: 0.5rem 0 0 0; color: var(--light-gray);">Total Residents</p>
            </div>
            <div style="text-align: center; padding: 1.5rem; border: 1px solid var(--border-gray); border-radius: var(--border-radius); background-color: #fafbfc;">
                <h3 style="margin: 0; color: var(--success-green); font-size: 2rem;">{{ users|length }}</h3>
                <p style="margin: 0.5rem 0 0 0; color: var(--light-gray);">Active Members</p>
            </div>
            <div style="text-align: center; padding: 1.5rem; border: 1px solid var(--border-gray); border-radius: var(--border-radius); background-color: #fafbfc;">
                <h3 style="margin: 0; color: var(--info-blue); font-size: 2rem;">100%</h3>
                <p style="margin: 0.5rem 0 0 0; color: var(--light-gray);">Participation Rate</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
